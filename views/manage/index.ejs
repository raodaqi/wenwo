<!DOCTYPE HTML>
<html>
<head>
    <title>WenWo</title>
     <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name='description', content='wenwo,é—®æˆ‘,å½“åœ°äºº,æ—…æ¸¸,æ”»ç•¥,ä¿¡æ¯,åˆ†äº«'>
    <meta name='author', content='raodqi'>
    <link rel="icon" type="image/x-icon" href="/img/logo.png" media="screen">
    <title>é—®æˆ‘â€”â€”åƒä¸ªå½“åœ°äººä¸€æ ·å»æ—…æ¸¸</title>
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_1462821367_1895313.css">
    <link rel="stylesheet" href="/css/sm.min.css">
    <link rel="stylesheet" href="/css/common.css">
    <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=cb84c659c88a7cc83b935a009b3a9cfd&plugin=AMap.Geocoder"></script>
    <!-- æ–° Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ -->
    <!-- <link rel="stylesheet" href="/css/bootstrap.min.css"> -->
</head>
<style>
    * {
        padding: 0;
        margin: 0;
    }
    li {
        list-style-type: none;
        cursor: pointer;
    }
    .wrap {
        margin: 0 auto;
        width: 1200px;
    }
    .title-bar {
        height: 60px;
        background: #f8bd38;
        border-radius: 5px;
        margin-bottom: 3rem;
    }
    .logo {
        color: #fff;
        font-size: 23px;
        line-height: 60px;
        margin-left: 20px;
    }
    .list {
        float: left;
        margin-top: 30px;
        margin-left: 30px;
    }
    .side-bar {
        width: 200px;
        /*background: #000;*/

    }
    .side-bar ul {
        /*border-radius: 10px;*/
        overflow: hidden;
    }
    .side-bar ul li {
        /*margin-bottom: 10px;*/
        text-align: center;
        height: 40px;
        font-size: 18px;
        line-height: 40px;
        background: #eee;
        margin:10px; 
       /* padding-top: 10px;
        padding-bottom: 10px;*/
    }
    ul li:hover {
        /*background: #ddd !important;*/
        background: #f8bd38 !important;
        color: white;
    }
    .manage-content {
        background: #eee;
        width: 880px;
        border-radius: 10px;
        overflow: hidden;
        padding: 20px 20px 20px 20px;
    }
    .manage ul li {
        display: block;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .manage ul li .ask-id {
        display: inline;
        margin-left: 30px;
        line-height: 20px;
        /*width: 90%;*/
    }
    .manage ul li .staus, .manage ul li .del {
        float: right;
        line-height: 20px;
        /*clear: both;*/
        margin-right: 30px;
    }
    .manage ul li .del:hover {
        color: red;
    }
    .check li {
        padding: 10px 0;
        font-size: 20px;
        text-align: center;

    }
    .side-bar-back{
        background: #eee !important;
    }
    .side-bar-backcheck {
        background: #f8bd38 !important;
        color: white;
    }
    .btn_pass, .btn_not, .btn_send,.btn_down,.btn_edit,.btn_add,.btn_save,.btn_delete,.location-btn_save{
        margin: 0;
        margin-top: 20px;
        font-size: 16px;
        color: white;
        border-radius: 5px;
        padding: 0;
        width: 100px;
        height: 40px;
        background: #f8bd38;
        border: none;
    }
    .btn_add{
        background: #6ed56c;
        margin-right: .5rem; 
    }
    .btn_save,.location-btn_save{
        background-color: #008be7;
    }
    .btn_delete{
        background-color: #f74b46;
        margin-left: .5rem; 
    }
    textarea {
        display: block;
        height: 100px;
        width: 300px;
    }
    .input-edit,#search {
        height: 30px;
        width: 240px;
        padding: 0 10px 0 10px;
        font-size: 15px;
        /*border-radius: 2px;
        border: none;
        box-shadow: none;
        outline: none;
        background-color: transparent;
        padding-left: 10px;
        margin-left: 10px;
        text-transform: lowercase;
        background-color: white;*/
    }
    .input-price {
        text-align: left;
    }
    .container-show{
        height: 400px;
        width: 400px;
        background-color: white;
    }
    .left{
        float: left;
        margin-right: 10px;
    }
    .hidden-text{
        color: red;
    }
    .de-show{
        padding:10px;
        font-size: 15px; 
        width: 300px;
    }
    .place{
        color: red;
        font-size: 15px;
        /*width: 300px;*/
        padding-left: 10px;
        line-height: 30px;
    }
    .check-box label{
        margin-right: 10px;
    }
    .check-box,.div-tag,.div-reason{
        margin-bottom: 10px;
    } 
    .type-item {
        display: inline-block;
        padding: 0px 20px;
        /* color: #FFC222; */
        /* background-color: #FFDC7F; */
        height: 30px;
        line-height: 30px;
        font-weight: 400;
        font-size: 15px;
        text-align: center;
        margin: 0 .5rem .2rem 0;
        border-radius: 3px;
        border: 1px solid #393e49;
    }
    .edit-reason,.edit-detail{
        font-size: 15px;
        padding: 10px;
        border-radius: 10px;
    }
    .button-start{
        display: inline-block;
        text-align: center;
        font-size: 15px;
        color: white;
        width: 100px;
        margin: 10px auto;
        height: 30px;
        line-height: 30px;
        border-radius: 5px;
        background-color: #efc553 !important;
        cursor: pointer;
        margin-left: 100px;
    }
    .edit-detail{
        height: 200px;
    }
    #search{
        width: 400px;
        display: block;
    } 
    body{
        overflow: auto;
    }
    .address-content{
        /*float: left;*/
        margin-bottom: 10px;
    }
    .amap-sug-result{
        top:213px !important;
    }
    .geolocation-position img{
        width: 40px;
        height: 40px;
    }
    .modal-overlay{
        display: none !important;
    }
    .modal-inner{
        background: rgba(0,0,0,.8);
        color: white;
    }
    .modal{
        position: fixed;
    }
    .notpass{
        color: #B9B9B9;
    }
    .pass{
        color: #4CAF50;
        font-weight: bolder;
    }
    .tag-li-list{
        /*height: 80px;*/
        /*line-height: 100px;*/
        /*display: inline-block;*/
        float: left;
        width: 200px;
        text-align: center;
        font-size: 18px;

    }
    .tag-img,.tag-tag,.tag-type,.add-img{
        width: 80px;
        height: 80px;
        cursor: pointer;
    }
    .tag-tag,.tag-type{
        width: 200px;
        text-align: center;
        line-height: 80px;
    }
    .content-title.tag li{
        width: 100%;
    }
    .content-title.tag ul li:hover {
        color: black !important;
    }
    .list-img{
        width: 100px;
    }
    #multiple{
        display: none;
    }
    .modal-text-input{
        color: black;
    }
    .modal-button{
        background: rgba(0,0,0,.8);
    }
    .send-img{
        height: 80px;
        line-height: 80px;
        margin-bottom: 10px;
    }
    .send-img img{
        margin-left: 10px;
    }
    .send-img label{
        display: block;
        float: left;
        height: 80px;
    }
    .send-num{
        margin:20px 0 10px 0;
    }
    .send-content-li{
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #ccc;
        margin-top: 1rem;
    }
    .send-url input{
        width: 25rem;
    }
    .carouse-num{
        width: 2.5rem;
        text-align: center;
    }
    .carousel-content-tip{
        color: #008be7;
        background: #f4faff;
        /*border-color: #4eb9ff;*/
        padding:.6rem;
        border-left: .5rem solid #4eb9ff;
        font-size: .72rem;
    }
    .carouse-show{
        margin-left: .5rem;
        margin-right: .3rem;
        color: #000000;
        font-size: .82rem;
    }
    .send-name{
        margin: .3rem 0;
    }
    .preloader-modal{
        position: fixed;
        bottom:0;
    }
    .red{
        color: #f74b46;
    }
    .share-edit{
        height: 36rem;
        width: 100%;
        border:0;
    }
    .manageData{
        top:3.2rem;
        position: absolute;
        /*margin-top:1rem;*/
        text-align: center;
        width: 900px;
        left:50%;
        transform: translateX(-50%);
        margin-left: 3rem;
    }
    .data-li{
        float: left;
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        border:1px solid #4cd964;
        margin:0  2rem;
    }
    .li-title{
        font-size: .4rem;
        color:#b0b0b0;
    }
    .li-num{
        margin-top: .5rem;
    }
    .yestoday,.today{
        position: absolute;
        font-size: .5rem;
        border:1px solid #ccc;
        border-radius: 5px;
        margin-left: 3.2rem;
        padding:.05rem .2rem;
    }
    .yestoday{
        bottom:.2rem;
    }
    .today{
        top:.2rem;
    }
    .yestoday .color{
        color:red;
        font-size: .65rem;
        margin-left: .1rem;
    }
    .today .color{
        color:#008be7;
        font-size: .65rem;
        margin-left: .1rem;
    }
    .delete-data-btn{
        margin: 0;
        margin: 150px auto;
        font-size: 16px;
        color: white;
        border-radius: 5px;
        padding: 0;
        width: 200px;
        height: 50px;
        line-height: 50px;
        text-align: center;
        background: #f8bd38;
        border: none;
        background-color: #f74b46;
        cursor: pointer;
    }
    /*åœ°å€æœç´¢UI */
    .location-box-li{
        /*background-color: white;*/
    }

    .location-box-li .hot-title{
        padding:.8rem 0 0 .8rem;
    }
    .my-location-content{
        padding: .6rem 0 .5rem .8rem;
        border-bottom: 1px solid #eee;
        margin-bottom: .5rem;
    }
    .location-city{
        font-size: .76rem;
        color: #333;
        /*font-weight: bold;*/
    }
    .location-detail{
        font-size: .6rem;
        color: #ccc;
    }

    .hot-location-content-li{
        font-size: .76rem;
        color: #333;
        /*font-weight: bold;*/
        padding:.6rem .8rem;
        border-bottom: 1px solid #eee;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #ccc;
        margin-top: 1rem;
    }
    .location-line{
        position: absolute;
        box-sizing: border-box;
        width: 100%;
        margin-left: 5rem;
        border-bottom: 1px solid  #eee;
        margin-top: -.6rem;
    }
    .hot-location .location-line{
        margin-left: 3.3rem;
    }
    .send-hot-num input{
        width: 2rem;
    }
    .send-hot-location input{
        width: 20rem;
    }
    .hot-location-list{
        position: absolute;
        width: 20rem;
        background-color: white;
        margin-left:59px;
        margin-top: -30px;
    }
    .auto-item {
        padding: .6rem .8rem;
        border-bottom: 1px solid #eee;
    }
    .no-address .no-address-img {
        width: 4rem;
        height: 4rem;
        display: block;
        margin: 2rem auto 1rem;
    }
    .no-address{
        text-align: center;
        font-size: .5rem;
        color: #999;
        height: 100%;
        padding-bottom: 2.5rem;
    }

    .card-li{
        display: inline-block;
        width: 300px;
        height: 424px;
        margin: 20px auto;
        -webkit-box-shadow: 2px 2px 2px #ccc;  
        -moz-box-shadow: 2px 2px 2px #ccc;  
        box-shadow: 2px 2px 2px #ccc;  
        border-radius: 6px;
        background-color: white;
        margin-right: 20px;
    }

    .card-img{
        height: 61.8%;
        border-radius: 6px;
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
    }
    .card-detail,.card-by{
        width: 100%;
        font-size: 14.8px;
        padding: 0 16px;
        margin-top: 10px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }
    .card-detail{
        height: 41px;
    }
    .card-by{
        text-align: right;
        margin-top: 20px;
        padding-right: 20px;
    }

    .card-content{
        background-color: #f4f4f4;
        height: 100%;
    }

    .card-delete{
        font-size: 16px;
        color: white;
        border-radius: 5px;
        padding: 0;
        width: 100px;
        height: 30px;
        background-color: #f74b46;
        border: none;
        margin: 30px auto;
        text-align: center;
        line-height: 30px;
        cursor: pointer;
    }
    .card-content-edit{
        overflow-x: scroll;
        overflow-y: hidden;
        width: 800px;
    }
    .card-ul{
        list-style: none;
        white-space: nowrap;
    }
</style>
<body>
    <div class="wrap">
        <div class="title-bar">
            <div class="logo" id="logo">WenWo</div>
        </div>
        <div class="manageData">
            <div class="userNum data-li">
                <div class="li-num">--</div>
                <div class="li-title">ç”¨æˆ·æ•°é‡</div>
                <div class="yestoday">æ˜¨<label class="color">--</label></div>
                <div class="today">ä»Š<label class="color">--</label></div>
            </div>
            <div class="askNum data-li">
                <div class="li-num">--</div>
                <div class="li-title">ä¿¡æ¯æ•°é‡</div>
                <div class="yestoday">æ˜¨<label class="color">--</label></div>
                <div class="today">ä»Š<label class="color">--</label></div>
            </div>
            <div class="havedNum data-li">
                <div class="li-num">--</div>
                <div class="li-title">è´­ä¹°æ•°é‡</div>
                <div class="yestoday">æ˜¨<label class="color">--</label></div>
                <div class="today">ä»Š<label class="color">--</label></div>
            </div>
            <div class="buyNum data-li">
                <div class="li-num">--</div>
                <div class="li-title">ä»˜è´¹æ•°é‡</div>
                <div class="yestoday">æ˜¨<label class="color">--</label></div>
                <div class="today">ä»Š<label class="color">--</label></div>
            </div>
            <div class="deleteNum data-li">
                <div class="li-num">--</div>
                <div class="li-title">åˆ é™¤æ•°é‡</div>
                <div class="yestoday">æ˜¨<label class="color">--</label></div>
                <div class="today">ä»Š<label class="color">--</label></div>
            </div>
        </div>
        <div>
            <div class="list side-bar">
                <ul>
                    <li class="send-bar side-bar-backcheck" id="send">è½®æ’­å›¾ç®¡ç†</li>
                    <li class="check-bar" id="check">å›¾æ–‡å‘å¸ƒç®¡ç†</li>
                    <li class="manage-bar" id="manage">çƒ­é—¨åœ°ç‚¹ç®¡ç†</li>
                    <li class="card-bar" id="askCard">å¡ç‰‡ç®¡ç†</li>
                    <li class="total-bar" id="total">æç°ç®¡ç†</li>
                    <li class="account-bar" id="account">å¸å·ç®¡ç†</li>
                </ul>
            </div>
            <div class="list manage-content">
                <div class="content-title send" style="display: block">
                <div class="carousel-content-tip">å›¾ç‰‡ï¼Œæ˜¯å¦æ˜¾ç¤ºæŒ‰é’®ç‚¹å‡»åä¸ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œéœ€è¦ç‚¹å‡»ä¿å­˜æ‰ä¼šä¿å­˜ï¼Œå›¾ç‰‡æœ€å¥½å…ˆå‹ç¼©ä¸‹æ‰ä¸Šä¼ ã€‚<a target="_black" href="https://tinypng.com" class="red">å›¾ç‰‡å‹ç¼©ç½‘ç«™</a></div>
                    <div class="send-content-ul">
                    </div>
                    <button class='btn_add'>æ·»åŠ </button>
                </div>

                <div class="content-title check" style="display: none">
                    <iframe src="/share/edit" class="share-edit" frameborder="0"></iframe>
                </div>
                <div class="content-title check-detail" style="display: none">
                    <div>
                        <div class="left">ID:</div>
                        <div class="detail-id"></div>
                    </div>
                    <div>
                        <div class="left">ä¸Šä¼ è€…:</div>
                        <div class="detail-createBy"></div>
                    </div>
                    <div>
                        <div class="left">ä¸Šä¼ æ—¶é—´:</div>
                        <div class="detail-time"></div>
                    </div>
                    <div>
                        <div class="left">çŠ¶æ€:</div>
                        <div class="detail-status"></div>
                    </div>
                    <div>
                        <div class="left">ä¸»é¢˜:</div>
                        <div class="detail-subject"></div>
                    </div>
                    <div>
                        <div class="left">æ ‡ç­¾:</div>
                        <div class="detail-label"></div>
                    </div>
                    <div>
                        <div class="left">æ¨èç†ç”±:</div>
                        <div class="detail-reason"></div>
                    </div>
                    <div>
                        <div class="left">è¯¦æƒ…(çº¢è‰²ä¸ºéšè—éƒ¨åˆ†):</div>
                        <div class="detail-information"></div>
                    </div>
                    <div>
                        <div>åœ°å›¾æ ‡æ³¨:</div>
                        <div class="add-detail"></div>
                        <div class="container-show" id="show2"></div>
                    </div>
                    <div>
                        <div class="left">ä»·æ ¼:</div>
                        <div class="detail-price"></div>
                    </div>
                    <div class="check-button">
                        <button class='btn_pass'>é€šè¿‡</button>
                        <button class='btn_not'>ä¸é€šè¿‡</button>
                    </div>
                    <div class="down" style="display:none">
                        <button class='btn_down'>ä¸‹æ¶</button>
                        <button class='btn_edit'>ç¼–è¾‘</button>
                    </div>
                </div>

                <div class="content-title total" style="display: none">
                    <ul>

                    </ul>
                </div>
                <div class="content-title manage" style="display: none">
                    <div class="">
                        <div class="hot-location location-box-li">
                            <div class="hot-location-content">
                            </div>
                            <button class='btn_add'>æ·»åŠ </button>
                        </div>
                    </div>
                </div>
                <div class="content-title askCard" style="display: none">
                    <div class="card-content-edit">
                        <div class="card-ul">
                            <div class="card-li">
                                <div data-url="http://o83np3eq2.bkt.clouddn.com/wenwo/1471911587140/sfexvjMA3DAF0m_OmjTEs7HoGY2HqvCAUu-_EN-XoRdssUtU3hWLzpX8_hk-h3t_.png" style="background: url(http://o83np3eq2.bkt.clouddn.com/wenwo/1471911587140/sfexvjMA3DAF0m_OmjTEs7HoGY2HqvCAUu-_EN-XoRdssUtU3hWLzpX8_hk-h3t_.png) center center / cover no-repeat;" class="card-img" alt=""></div>
                                <div class="card-detail">
                                    æ¥åˆ°ä¸œå—ä¸€å¸¦å°±æ˜¯ä»¥åƒä¸ºä¸»çš„æˆ‘ï¼Œè¿™å®¶åº—ä½äºå¦é—¨ç¹åæ­¥è¡Œè¡—æ—å°æ¹¾å°åƒè¡—åçš„è€å­—å·æµ·é²œå¤§æ’æ¡£ï¼Œ24å¹´çš„è€åº—ï¼Œåœ°ä½æ˜¯ä¸å¯åŠ¨æ‘‡çš„ï¼Œè€Œä¸”ä»·æ ¼å±…ç„¶å„ç§å¹³ä»·ï¼Œå‘³é“è¿˜å¾ˆç¾ï¼Œç‰¹åˆ«æ˜¯å¤§èƒèŸ¹å’Œçˆ†ç‚’èŠ±è›¤~~
                                </div>
                                <div class="card-by">â€” â€”Big PoppiğŸ€</div>

                                <div class="card-delete">
                                    åˆ é™¤
                                </div>
                            </div>

                            <div class="card-li">
                                <div data-url="http://o83np3eq2.bkt.clouddn.com/wenwo/1471911587140/sfexvjMA3DAF0m_OmjTEs7HoGY2HqvCAUu-_EN-XoRdssUtU3hWLzpX8_hk-h3t_.png" style="background: url(http://o83np3eq2.bkt.clouddn.com/wenwo/1471911587140/sfexvjMA3DAF0m_OmjTEs7HoGY2HqvCAUu-_EN-XoRdssUtU3hWLzpX8_hk-h3t_.png) center center / cover no-repeat;" class="card-img" alt=""></div>
                                <div class="card-detail">
                                    æ¥åˆ°ä¸œå—ä¸€å¸¦å°±æ˜¯ä»¥åƒä¸ºä¸»çš„æˆ‘ï¼Œ
                                </div>
                                <div class="card-by">â€” â€”Big PoppiğŸ€</div>

                                <div class="card-delete">
                                    åˆ é™¤
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-title account" style="display: none">
                    <div>
    
                    </div>
                </div>

                <div class="content-title account" style="display: none">
                    <div class="delete-data-btn">
                        åˆ é™¤å‹‡å“¥è´­ä¹°æ•°æ®
                    </div>
                </div>
            </div>

        </div>

        <div id="dropbox" class="dropbox" style="display:none">
        </div>

        <input id="multiple" class="hidden" type="file" id="upload" multiple>
    </div>
    <script type='text/javascript' src='/js/zepto.min.js' charset='utf-8'></script>
     <!-- <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=cb84c659c88a7cc83b935a009b3a9cfd&plugin=AMap.Geocoder"></script> -->

     <script type="text/javascript" src="/js/sm.min.js"></script>
     <script type="text/javascript" src="/js/common.js"></script>
     <script type="text/javascript" src="/js/plupload.full.min.js"></script>
     <script type="text/javascript" src="/js/qiniu.min.js"></script>
    
    <script>
        $(".list li").on("click",function(){
            var  id = this.id;
            console.log(id);
            $(".content-title").hide();
            $("."+id).show();
            $(".list li").removeClass("side-bar-backcheck");
            $(this).addClass("side-bar-backcheck");
        })

        //åˆå§‹åŒ–åå°æ•°æ®
        function getManageData(callback){
            $.ajax({
              type: "GET",
              url: "/manage/getdata",
              data: {},
              dataType: "json",
              success:function(result){
                if(result.code == 200){
                    callback.success(result);
                }else{
                    callback.error(result);
                }
              },
              error:function(error){
                $.toast("æœåŠ¡å™¨å‡ºé”™");
                callback.error(error);
              }
          })
        }
        getManageData({
            success:function(result){
                console.log(result);
                if(result.code == 200){
                    var data = result.data;
                    var dayData = result.dayData;
                    $(".userNum .li-num").text(data.userNum);
                    $(".buyNum .li-num").text(data.buyNum);
                    $(".havedNum .li-num").text(data.havedNum);
                    $(".deleteNum .li-num").text(data.deleteNum);
                    $(".askNum .li-num").text(data.askNum);

                    //è®¡ç®—æ˜¨æ—¥æ–°å¢ã€‚ä»Šæ—¥æ–°å¢
                    $(".userNum .yestoday .color").text(dayData[0].userNum - dayData[1].userNum);
                    $(".buyNum .yestoday .color").text(dayData[0].buyNum - dayData[1].buyNum);
                    $(".havedNum .yestoday .color").text(dayData[0].havedNum - dayData[1].havedNum);
                    $(".deleteNum .yestoday .color").text(dayData[0].deleteNum - dayData[1].deleteNum);
                    $(".askNum .yestoday .color").text(dayData[0].askNum - dayData[1].askNum);

                    $(".userNum .today .color").text(data.userNum - dayData[0].userNum);
                    $(".buyNum .today .color").text(data.buyNum - dayData[0].buyNum);
                    $(".havedNum .today .color").text(data.havedNum - dayData[0].havedNum);
                    $(".deleteNum .today .color").text(data.deleteNum - dayData[0].deleteNum);
                    $(".askNum .today .color").text(data.askNum - dayData[0].askNum);
                }
            },
            error:function(error){
                $.toast("è¯·æ±‚å¤±è´¥");
            }
        })

        //åˆå§‹åŒ–è½®æ’­å›¾åŠŸèƒ½
        function sendCarouseQuest(url,type,data,callback){
            $.ajax({
              type: type,
              url: url,
              data: data,
              dataType: "json",
              success:function(result){
                if(result.code == 200){
                    callback.success(result);
                }else{
                    callback.error(result);
                }
              },
              error:function(error){
                $.toast("æœåŠ¡å™¨å‡ºé”™");
                callback.error(error);
              }
          })
        }
        function getCarouselInfo(callback){
            var url = "/carousel/getcarouselinfo",
                type = "GET",
                data = {
                    type : "all"
                };
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        function deleteCarouselInfo(id,callback){
            var url = "/carousel/delcarouselinfo",
                type = "POST",
                data = {
                    carousel_id : id
                };
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        function addCarouselInfo(data,callback){
            var url = "/carousel/addcarouselinfo",
                type = "POST",
                data = data;
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        function editCarouselInfo(data,callback){
            var url = "/carousel/editcarouselinfo",
                type = "POST",
                data = data;
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        function deletedata(callback){
            var url = "/manage/deletedata",
                type = "GET",
                data = {};
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        function delLocation(id,callback){
            var url = "/location/dellocation",
                type = "POST",
                data = {
                    location_id : id
                };
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        function addLocation(data,callback){
            var url = "/location/addlocation",
                type = "POST",
                data = data;
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        function editLocation(data,callback){
            var url = "/location/editlocation",
                type = "POST",
                data = data;
            sendCarouseQuest(url,type,data,{
                success:function(result){
                    callback.success(result);
                },
                error:function(error){
                    callback.error(error);
                }
            })
        }

        getCarouselInfo({
            success:function(result){
                console.log(result);
                var data = result.data;
                var li = '';
                for(var i = 0 ; i < data.length; i++){
                    li += '<div class="send-content-li" data-num="1" data-id="'+data[i].objectId+'" id="'+data[i].objectId+'"><div class="send-img"><label> è½®æ’­å›¾:</label><img class="tag-img" data-type="0" src="'+data[i].carouselImage+'" alt=""></div><div class="send-name">åå­—ï¼š<input class="name" type="text" value="'+(data[i].carouselName?data[i].carouselName:"")+'"></div><div class="send-url">é“¾æ¥ï¼š<input type="text" value="'+data[i].carouselClickURL+'"></div><button class="btn_save">ä¿å­˜</button><button class="btn_delete">åˆ é™¤</button><label class="carouse-show">æ˜¯å¦æ˜¾ç¤º</label><label class="label-switch"><input type="checkbox" '+(data[i].show ? "checked='true'" : "")+'><div class="checkbox"></div></label></div>';
                }
                $(".send-content-ul").empty().append(li);
            },
            error:function(error){
                console.log(error);
            }
        })

        $(".send .btn_add").on("click",function(){
            var length = $(".send-content-li").length;
            li = '<div class="send-content-li" data-num="1" data-type="add"><div class="send-img"><label> è½®æ’­å›¾:</label><img class="tag-img" data-type="0" src="/img/add.jpg" alt=""></div><div class="send-name">åå­—ï¼š<input class="name" type="text" value=""></div><div class="send-url">é“¾æ¥ï¼š<input type="text" value=""></div><button class="btn_save">ä¿å­˜</button><button class="btn_delete">åˆ é™¤</button><label class="carouse-show">æ˜¯å¦æ˜¾ç¤º</label><label class="label-switch"><input type="checkbox" checked="true"><div class="checkbox"></div></label></div>';
            $(".send-content-ul").append(li);
        })

        $(".manage .btn_add").on("click",function(){
            var length = $(".send-content-li").length;
            li = '<div class="hot-location-content-li" data-type="add" id="location'+(length+1)+'"><div class="send-hot-location">åœ°ç‚¹ï¼š<input type="text" value=""></div><div class="send-hot-position">åæ ‡ï¼š<label class="position-x">0</label>,<label class="position-y">0</label></div><div class="hot-location-list"></div><div class="send-hot-num">çƒ­åº¦ï¼š<input type="number" value="0"></div><button class="location-btn_save">ä¿å­˜</button><button class="btn_delete">åˆ é™¤</button></div>';
            $(".hot-location-content").append(li);
        })

        $(".send-content-ul").on("click",".btn_delete",function(){
            var id = $(this).parent().attr("data-id");
            var $parent = $(this).parent();
            console.log(id);
            if(!id){
                $parent.remove();
            }else{
                //å‘èµ·åˆ é™¤è¯·æ±‚
                $.confirm('ä½ ç¡®å®šè¦åˆ é™¤è¿™æ¡æ•°æ®å—?', 'æ¸©é¦¨æç¤º',
                    function () {
                      $.showPreloader("æ­£åœ¨åˆ é™¤æ•°æ®");
                      deleteCarouselInfo(id,{
                        success: function(result){
                            $.hidePreloader();
                            if(result.code == 200){
                                $.toast("åˆ é™¤æˆåŠŸ");
                                $parent.remove();
                            }else{
                                $.toast("åˆ é™¤å¤±è´¥");
                            }
                        },
                        error:function(error){
                            $.toast("æœåŠ¡å™¨å‡ºé”™");
                        }
                      })
                    },
                    function () {

                    }
                );
            }
        })

        $(".hot-location-content").on("click",".btn_delete",function(){
            var id = $(this).parent().attr("data-id");
            var $parent = $(this).parent();
            console.log(id);
            if(!id){
                $parent.remove();
            }else{
                //å‘èµ·åˆ é™¤è¯·æ±‚
                $.confirm('ä½ ç¡®å®šè¦åˆ é™¤è¿™æ¡æ•°æ®å—?', 'æ¸©é¦¨æç¤º',
                    function () {
                      $.showPreloader("æ­£åœ¨åˆ é™¤æ•°æ®");
                      delLocation(id,{
                        success: function(result){
                            $.hidePreloader();
                            if(result.code == 200){
                                $.toast("åˆ é™¤æˆåŠŸ");
                                $parent.remove();
                            }else{
                                $.toast("åˆ é™¤å¤±è´¥");
                            }
                        },
                        error:function(error){
                            $.toast("æœåŠ¡å™¨å‡ºé”™");
                        }
                      })
                    },
                    function () {

                    }
                );
            }
        })

        $(".card-content-edit").on("click",".card-delete",function(){
            var id = $(this).attr("data-id");
            var $parent = $(this).parent();
            console.log(id);
            if(!id){
                $parent.remove();
            }else{
                //å‘èµ·åˆ é™¤è¯·æ±‚
                $.confirm('ä½ ç¡®å®šè¦åˆ é™¤è¿™æ¡æ•°æ®å—?', 'æ¸©é¦¨æç¤º',
                    function () {
                        $.showPreloader("æ­£åœ¨åˆ é™¤æ•°æ®");
                        var url = "/card/delcard",
                            type = "POST",
                            data = {
                                card_id : id
                            };
                        sendCarouseQuest(url,type,data,{
                            success: function(result){
                                $.hidePreloader();
                                if(result.code == 200){
                                    $.toast("åˆ é™¤æˆåŠŸ");
                                    $parent.remove();
                                }else{
                                    $.toast("åˆ é™¤å¤±è´¥");
                                }
                            },
                            error:function(error){
                                $.toast("æœåŠ¡å™¨å‡ºé”™");
                            }
                        })
                    },
                    function () {

                    }
                );
            }
        })

        $(".delete-data-btn").on("click",function(){
            $.confirm('ä½ ç¡®å®šè¦åˆ é™¤å‹‡å“¥è´­ä¹°æ•°æ®?', 'æ¸©é¦¨æç¤º',
                function () {
                    $.showPreloader("æ­£åœ¨åˆ é™¤æ•°æ®");
                    deletedata({
                        success:function(result){
                            $.hidePreloader();
                            if(result.code == 200){
                                $.toast("åˆ é™¤æˆåŠŸ");
                            }else{
                                $.toast("åˆ é™¤å¤±è´¥");
                            }
                        },
                        error:function(error){
                            $.hidePreloader();
                            $.toast("æœåŠ¡å™¨å‡ºé”™");
                        }
                    })
                },
                function () {
                }
            );
        })

    </script>

     <script>
        var TAGID = '',
            TAGTYPE = '',
            $TAG,
            TAGLEAVE = '',
            TAGNAME = '';

        var uploader = Qiniu.uploader({
            runtimes: 'html5,flash,html4',    //ä¸Šä¼ æ¨¡å¼,ä¾æ¬¡é€€åŒ–
            browse_button: 'dropbox',       //ä¸Šä¼ é€‰æ‹©çš„ç‚¹é€‰æŒ‰é’®ï¼Œ**å¿…éœ€**
            uptoken_url: '/manage/token',
            filters: {
              max_file_size : '10mb',
              mime_types : [ //åªå…è®¸ä¸Šä¼ å›¾ç‰‡å’Œzipæ–‡ä»¶
                { title : "Image files", extensions : "JPEG,jpg,gif,png" }
              ]
            },
            domain: 'http://qiniu-plupload.qiniudn.com/',
                //bucket åŸŸåï¼Œä¸‹è½½èµ„æºæ—¶ç”¨åˆ°ï¼Œ**å¿…éœ€**
            max_file_size: '2048mb',           //æœ€å¤§æ–‡ä»¶ä½“ç§¯é™åˆ¶
            flash_swf_url: 'js/plupload/Moxie.swf',  //å¼•å…¥flash,ç›¸å¯¹è·¯å¾„
            max_retries: 3,                   //ä¸Šä¼ å¤±è´¥æœ€å¤§é‡è¯•æ¬¡æ•°
            chunk_size: '4mb',                //åˆ†å—ä¸Šä¼ æ—¶ï¼Œæ¯ç‰‡çš„ä½“ç§¯
            auto_start: true,                 //é€‰æ‹©æ–‡ä»¶åè‡ªåŠ¨ä¸Šä¼ ï¼Œè‹¥å…³é—­éœ€è¦è‡ªå·±ç»‘å®šäº‹ä»¶è§¦å‘ä¸Šä¼ 
            init: {
                'FilesAdded': function(up, files) {
                    $.showPreloader("æ­£åœ¨ä¸Šä¼ ");
                    plupload.each(files, function(file) {
                       var myDate=new Date();
                       time = myDate.getTime();
                       fileName = files[0].name;
                       var name = files[0].name;

                       fileName = "wenwo/"+time+"/"+fileName;

                       if(up.files.length > 1){
                        for(var i = 0; i < up.files.length - 1;i++){
                          up.removeFile(up.files[i].id);
                        }
                       }
                       console.log($TAG);
                       // previewImage(files[0],function(imgsrc){
                       //      $TAG.attr("src",imgsrc);
                       //  })
                    });
                },
                'BeforeUpload': function(up, file) {
                       // æ¯ä¸ªæ–‡ä»¶ä¸Šä¼ å‰,å¤„ç†ç›¸å…³çš„äº‹æƒ…
                },
                'UploadProgress': function(up, file) {
                       // æ¯ä¸ªæ–‡ä»¶ä¸Šä¼ æ—¶,å¤„ç†ç›¸å…³çš„äº‹æƒ…
                       // $(".squre").text(file.percent+"%");
                       $(".modal-title").text("å·²ä¸Šä¼ "+file.percent+"%");
                       console.log(file.percent);
                       // console.log(up);
                },
                'FileUploaded': function(up, file, info) {
                       console.log(info);
                       var res = JSON.parse(info);
                       var sourceLink = "http://o83np3eq2.bkt.clouddn.com/" + res.key; //
                       console.log(sourceLink);
                       $.hidePreloader();
                       $TAG.attr("src",sourceLink);
                },
                'Error': function(up, err, errTip) {
                       //ä¸Šä¼ å‡ºé”™æ—¶,å¤„ç†ç›¸å…³çš„äº‹æƒ…
                       console.log(err);
                },
                'UploadComplete': function() {
                       //é˜Ÿåˆ—æ–‡ä»¶å¤„ç†å®Œæ¯•å,å¤„ç†ç›¸å…³çš„äº‹æƒ…
                },
                'Key': function(up, file) {
                    // è‹¥æƒ³åœ¨å‰ç«¯å¯¹æ¯ä¸ªæ–‡ä»¶çš„keyè¿›è¡Œä¸ªæ€§åŒ–å¤„ç†ï¼Œå¯ä»¥é…ç½®è¯¥å‡½æ•°
                    // è¯¥é…ç½®å¿…é¡»è¦åœ¨ unique_names: false , save_key: false æ—¶æ‰ç”Ÿæ•ˆ
                    var key = "";
                    key = fileName;
                    // do something with key here
                    return key
                }
              }
          });

        $(".send-content-ul").on("click",".tag-img",function(){
            $TAG = $(this);
            $("#multiple,#dropbox").click();
            // uploader.start();
        })

        $(".send-content-ul").on("click",".btn_save",function(){
            //åˆ¤æ–­æ˜¯å¦ä¸Šä¼ äº†å›¾ç‰‡
            var img = $(this).parent().find(".tag-img").attr("src");
            var url = $(this).parent().find(".send-url input").val();
            var name = $(this).parent().find(".send-name input").val();
            var ifAdd = $(this).parent().attr("data-type");
            var show = $(this).parent().find(".label-switch input").prop("checked") ? 1 : 0;
            var id = $(this).parent().attr("data-id");
            show  = parseInt(show);
            if(img == "/img/add.jpg"){
                $.toast("å›¾ç‰‡ä¸èƒ½ä¸ºç©º");
                return ;
            }
            if(!url){
                $.toast("é“¾æ¥ä¸èƒ½ä¸ºç©º");
                return ;
            }
            if(ifAdd == "add"){
                $.showPreloader("æ­£åœ¨æ·»åŠ ");
            }else{
                $.showPreloader("æ­£åœ¨æ›´æ”¹");
            }
            //æ–°æ·»åŠ 
            var data = {
                name     : name,
                clickURL : url,
                image    : img,
                show     : show
            }
            if(ifAdd == "add"){
                addCarouselInfo(data,{
                    success:function(result){
                        $.hidePreloader();
                        if(result.code == 200){
                            $.toast("æ·»åŠ æˆåŠŸ");
                            console.log(result);
                        }else{
                            $.toast("æ·»åŠ å¤±è´¥");
                        }
                    },
                    error:function(error){
                        $.hidePreloader();
                        $.toast("æœåŠ¡å™¨å‡ºé”™");
                    }
                })
            }else{
                //ç¼–è¾‘
                data.id = id
                editCarouselInfo(data,{
                    success:function(result){
                        $.hidePreloader();
                        if(result.code == 200){
                            $.toast("æ›´æ”¹æˆåŠŸ");
                        }else{
                            $.toast("æ›´æ”¹å¤±è´¥");
                        }
                    },
                    error:function(error){
                        $.toast("æœåŠ¡å™¨å‡ºé”™");
                    }
                })
            }

        })

        $(".hot-location-content").on("click",".location-btn_save",function(){
            //åˆ¤æ–­æ˜¯å¦ä¸Šä¼ äº†å›¾ç‰‡
            var geox = $(this).parent().find(".send-hot-position .position-x").text();
            var geoy = $(this).parent().find(".send-hot-position .position-y").text();
            var hot = $(this).parent().find(".send-hot-num input").val();
            var address = $(this).parent().find(".send-hot-location input").val();
            var ifAdd = $(this).parent().attr("data-type");
            var id = $(this).parent().attr("data-id");

            if(ifAdd == "add"){
                if(!geox || !geoy){
                    $.toast("åæ ‡ä¸èƒ½ä¸ºç©º");
                    return ;
                }
                if(!address){
                    $.toast("åœ°å€ä¸èƒ½ä¸ºç©º");
                    return ;
                }
                if(!hot){
                    hot = 0;
                }

                $.showPreloader("æ­£åœ¨æ·»åŠ ");
            }else{
                $.showPreloader("æ­£åœ¨æ›´æ”¹");
            }
            //æ–°æ·»åŠ 
            var data = {
                geox     : geox,
                geoy     : geoy,
                hot      : hot,
                address  : address
            }
            if(ifAdd == "add"){
                addLocation(data,{
                    success:function(result){
                        $.hidePreloader();
                        if(result.code == 200){
                            $.toast("æ·»åŠ æˆåŠŸ");
                            console.log(result);
                            $(".hot-location-content").empty();
                            loadLocationList();
                        }else{
                            $.toast("æ·»åŠ å¤±è´¥");
                        }
                    },
                    error:function(error){
                        $.hidePreloader();
                        $.toast("æœåŠ¡å™¨å‡ºé”™");
                    }
                })
            }else{
                //ç¼–è¾‘
                data.id = id;
                editLocation(data,{
                    success:function(result){
                        $.hidePreloader();
                        if(result.code == 200){
                            $.toast("æ›´æ”¹æˆåŠŸ");
                        }else{
                            $.toast("æ›´æ”¹å¤±è´¥");
                        }
                    },
                    error:function(error){
                        $.toast("æœåŠ¡å™¨å‡ºé”™");
                    }
                })
            }

        })


        // var uploader = Qiniu.uploader({
        //     runtimes: 'html5,flash,html4',    //ä¸Šä¼ æ¨¡å¼,ä¾æ¬¡é€€åŒ–
        //     browse_button: 'dropbox',       //ä¸Šä¼ é€‰æ‹©çš„ç‚¹é€‰æŒ‰é’®ï¼Œ**å¿…éœ€**
        //     uptoken_url: '/manage/token',

        //     domain: 'http://qiniu-plupload.qiniudn.com/',
        //         //bucket åŸŸåï¼Œä¸‹è½½èµ„æºæ—¶ç”¨åˆ°ï¼Œ**å¿…éœ€**
        //     container: 'multiple',           //ä¸Šä¼ åŒºåŸŸDOM IDï¼Œé»˜è®¤æ˜¯browser_buttonçš„çˆ¶å…ƒç´ ï¼Œ
        //     max_file_size: '2048mb',           //æœ€å¤§æ–‡ä»¶ä½“ç§¯é™åˆ¶
        //     flash_swf_url: 'js/plupload/Moxie.swf',  //å¼•å…¥flash,ç›¸å¯¹è·¯å¾„
        //     max_retries: 3,                   //ä¸Šä¼ å¤±è´¥æœ€å¤§é‡è¯•æ¬¡æ•°
        //     dragdrop: true,                   //å¼€å¯å¯æ‹–æ›³ä¸Šä¼ 
        //     drop_element: 'create-list-logo',        //æ‹–æ›³ä¸Šä¼ åŒºåŸŸå…ƒç´ çš„IDï¼Œæ‹–æ›³æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åå¯è§¦å‘ä¸Šä¼ 
        //     chunk_size: '4mb',                //åˆ†å—ä¸Šä¼ æ—¶ï¼Œæ¯ç‰‡çš„ä½“ç§¯
        //     auto_start: false,                 //é€‰æ‹©æ–‡ä»¶åè‡ªåŠ¨ä¸Šä¼ ï¼Œè‹¥å…³é—­éœ€è¦è‡ªå·±ç»‘å®šäº‹ä»¶è§¦å‘ä¸Šä¼ 
        //     init: {
        //         'FilesAdded': function(up, files) {
        //             $(".app-logo-loading").show();
        //             plupload.each(files, function(file) {
        //                var myDate=new Date();
        //                time = myDate.getTime();
        //                fileName = files[0].name;
        //                var name = files[0].name;

        //                fileName = "wenwo/"+time+"/"+fileName;

        //                if(up.files.length > 1){
        //                 for(var i = 0; i < up.files.length - 1;i++){
        //                   up.removeFile(up.files[i].id);
        //                 }
        //                }
        //                console.log($TAG);
        //                previewImage(files[0],function(imgsrc){
        //                     $TAG.attr("src",imgsrc);
        //                     uploader.start();
        //                       // $(".app-logo-loading").hide();
        //                 })
        //             });
        //         },
        //         'BeforeUpload': function(up, file) {
        //                // æ¯ä¸ªæ–‡ä»¶ä¸Šä¼ å‰,å¤„ç†ç›¸å…³çš„äº‹æƒ…
        //         },
        //         'UploadProgress': function(up, file) {
        //                // æ¯ä¸ªæ–‡ä»¶ä¸Šä¼ æ—¶,å¤„ç†ç›¸å…³çš„äº‹æƒ…
        //                // $(".squre").text(file.percent+"%");
        //                $.showPreloader("æ­£åœ¨æäº¤");
        //                console.log(file.percent);
        //                // console.log(up);
        //         },
        //         'FileUploaded': function(up, file, info) {
        //                console.log(info);
        //                var res = JSON.parse(info);
        //                var sourceLink = "http://o83np3eq2.bkt.clouddn.com/" + res.key; //è·å–ä¸Šä¼ æˆåŠŸåçš„æ–‡ä»¶çš„Url
        //                console.log(sourceLink);
        //                var data = {
        //                   type      : TAGLEAVE,
        //                   level     : TAGTYPE,
        //                   tag_name  : TAGNAME,
        //                   url       : sourceLink
        //                }
        //                $.ajax({
        //                   type : "POST",
        //                   data: data,
        //                   dataType: "json",
        //                   url : "ask/edittag",
        //                   success : function(result){
        //                     $.hidePreloader();
        //                     if(result.code == 200){
        //                         $.toast("æ“ä½œæˆåŠŸ");
        //                         console.log(result);
        //                     }else{
        //                         $.toast(result.message);
        //                     }
                            
        //                   },
        //                   error:function(error){
        //                     $.hidePreloader();
        //                     $.toast("ç½‘ç»œå‡ºé”™");
        //                     console.log(error);
        //                   }
        //               });

        //         },
        //         'Error': function(up, err, errTip) {
        //                //ä¸Šä¼ å‡ºé”™æ—¶,å¤„ç†ç›¸å…³çš„äº‹æƒ…
        //                console.log(err);
        //         },
        //         'UploadComplete': function() {
        //                //é˜Ÿåˆ—æ–‡ä»¶å¤„ç†å®Œæ¯•å,å¤„ç†ç›¸å…³çš„äº‹æƒ…
        //         },
        //         'Key': function(up, file) {
        //             // è‹¥æƒ³åœ¨å‰ç«¯å¯¹æ¯ä¸ªæ–‡ä»¶çš„keyè¿›è¡Œä¸ªæ€§åŒ–å¤„ç†ï¼Œå¯ä»¥é…ç½®è¯¥å‡½æ•°
        //             // è¯¥é…ç½®å¿…é¡»è¦åœ¨ unique_names: false , save_key: false æ—¶æ‰ç”Ÿæ•ˆ
        //             var key = "";
        //             key = fileName;
        //             // do something with key here
        //             return key
        //         }
        //       }
        //   });

      //pluploadä¸­ä¸ºæˆ‘ä»¬æä¾›äº†mOxieå¯¹è±¡
      //æœ‰å…³mOxieçš„ä»‹ç»å’Œè¯´æ˜è¯·çœ‹ï¼šhttps://github.com/moxiecode/moxie/wiki/API
      //å¦‚æœä½ ä¸æƒ³äº†è§£é‚£ä¹ˆå¤šçš„è¯ï¼Œé‚£å°±ç…§æŠ„æœ¬ç¤ºä¾‹çš„ä»£ç æ¥å¾—åˆ°é¢„è§ˆçš„å›¾ç‰‡å§
      function previewImage(file,callback){//fileä¸ºpluploadäº‹ä»¶ç›‘å¬å‡½æ•°å‚æ•°ä¸­çš„fileå¯¹è±¡,callbackä¸ºé¢„è§ˆå›¾ç‰‡å‡†å¤‡å®Œæˆçš„å›è°ƒå‡½æ•°
        if(!file || !/image\//.test(file.type)) return; //ç¡®ä¿æ–‡ä»¶æ˜¯å›¾ç‰‡
        if(file.type=='image/gif'){//gifä½¿ç”¨FileReaderè¿›è¡Œé¢„è§ˆ,å› ä¸ºmOxie.Imageåªæ”¯æŒjpgå’Œpng
          var fr = new mOxie.FileReader();
          fr.onload = function(){
            callback(fr.result);
            fr.destroy();
            fr = null;
          }
          fr.readAsDataURL(file.getSource());
        }else{
          var preloader = new mOxie.Image();
          preloader.onload = function() {
            // preloader.downsize( 300, 300 );//å…ˆå‹ç¼©ä¸€ä¸‹è¦é¢„è§ˆçš„å›¾ç‰‡,å®½300ï¼Œé«˜300
            // preloader.downsize( 93, 93 );//å…ˆå‹ç¼©ä¸€ä¸‹è¦é¢„è§ˆçš„å›¾ç‰‡,å®½300ï¼Œé«˜300
            var imgsrc = preloader.type=='image/jpeg' ? preloader.getAsDataURL('image/jpeg',80) : preloader.getAsDataURL(); //å¾—åˆ°å›¾ç‰‡src,å®è´¨ä¸ºä¸€ä¸ªbase64ç¼–ç çš„æ•°æ®
            callback && callback(imgsrc); //callbackä¼ å…¥çš„å‚æ•°ä¸ºé¢„è§ˆå›¾ç‰‡çš„url
            preloader.destroy();
            preloader = null;
          };
          preloader.load( file.getSource() );
        }
      }
     </script>

     <!-- <script type="text/javascript" src="/js/map.js"></script> -->
     <script>
     (function(Zepto){
            Zepto.fn.getCursorPosition = function(){
                if(this.lengh == 0) return -1;
                return $(this).getSelectionStart();
            }
            Zepto.fn.setCursorPosition = function(position){
                if(this.lengh == 0) return this;
                return $(this).setSelection(position, position);
            }
            Zepto.fn.getSelection = function(){
                if(this.lengh == 0) return -1;
                var s = $(this).getSelectionStart();
                var e = $(this).getSelectionEnd();
                return this[0].value.substring(s,e);
            }
            Zepto.fn.getSelectionStart = function(){
                if(this.lengh == 0) return -1;
                input = this[0];

                var pos = input.value.length;

                if (input.createTextRange) {
                    var r = document.selection.createRange().duplicate();
                    r.moveEnd('character', input.value.length);
                    if (r.text == '') 
                    pos = input.value.length;
                    pos = input.value.lastIndexOf(r.text);
                } else if(typeof(input.selectionStart)!="undefined")
                pos = input.selectionStart;

                return pos;
            }
            Zepto.fn.getSelectionEnd = function(){
                if(this.lengh == 0) return -1;
                input = this[0];

                var pos = input.value.length;

                if (input.createTextRange) {
                    var r = document.selection.createRange().duplicate();
                    r.moveStart('character', -input.value.length);
                    if (r.text == '') 
                    pos = input.value.length;
                    pos = input.value.lastIndexOf(r.text);
                } else if(typeof(input.selectionEnd)!="undefined")
                pos = input.selectionEnd;

                return pos;
            }
            Zepto.fn.setSelection = function(selectionStart, selectionEnd) {
                    if(this.lengh == 0) return this;
                    input = this[0];

                    if (input.createTextRange) {
                            var range = input.createTextRange();
                            range.collapse(true);
                            range.moveEnd('character', selectionEnd);
                            range.moveStart('character', selectionStart);
                            range.select();
                    } else if (input.setSelectionRange) {
                            input.focus();
                            input.setSelectionRange(selectionStart, selectionEnd);
                    }

                    return this;
            }
            Zepto.fn.insertAtCousor = function(myValue){
                var $t=$(this)[0];
                if (document.selection) {
                    this.focus();
                    sel = document.selection.createRange();
                    sel.text = myValue;
                    this.focus();
                }else if($t.selectionStart || $t.selectionStart == '0'){
                    var startPos = $t.selectionStart;
                    var endPos = $t.selectionEnd;
                    var scrollTop = $t.scrollTop;
                    $t.value = $t.value.substring(0, startPos) + myValue + $t.value.substring(endPos, $t.value.length);
                    this.focus();
                    $t.selectionStart = startPos + myValue.length;
                    $t.selectionEnd = startPos + myValue.length;
                    $t.scrollTop = scrollTop;
                }else{
                    this.value += myValue;
                    this.focus();
                }
            }
        })(Zepto);
     </script>
    <script>
        //ç‚¹å‡»ä¸‹æ¶
        $('.check-detail').on('click', ".btn_down", function () {
            //console.log('pass click');
            $.showPreloader("æ­£åœ¨æäº¤");
            var askId = $('.detail-id').text();
            console.log(askId);
            var data = {
                ask_id          : askId,
                username        : "wenwo",
                cancle_reason   : "error"
            }
            $.ajax({
                type: "POST",
                url: '/ask/admincancle',
                data: data,
                dataType: "json",
                success : function(result) {
                    $.hidePreloader();
                    console.log(result);
                    if (result.code == 200) {
                        $.toast("ä¸‹æ¶æˆåŠŸ");
                        $('.check-detail').hide();
                        manageAsk();
                        $('.check').show();
                    }else{
                        $.toast(result.message);
                    }
                },
                error : function(){
                    $.hidePreloader();
                    $.toast("æœåŠ¡å™¨å¼‚å¸¸");
                    console.log('err');
                }
            });
        });

$(".hot-location-content").on("input change",".send-hot-location input",function(){
    var id = $(this).parent().parent()[0].id;
    var text = $(this).val().replace(/(^\s*)|(\s*$)/g, "");

    if(text.length){
      AMap.service(['AMap.Autocomplete',"AMap.PlaceSearch"], function() {
        var autoOptions = {
            city: "", //åŸå¸‚ï¼Œé»˜è®¤å…¨å›½
       };
       autocomplete= new AMap.Autocomplete(autoOptions);
      //å…³é”®å­—æŸ¥è¯¢
      autocomplete.search(text, function(statu, result) {
          var tips = result.tips;
          if(statu == "complete" && tips.length){
            var sug = '';
            for(var i = 0 ; i < tips.length; i++){
              sug +='<div class="auto-item" data-adcode="'+tips[i].adcode+'" data-name="'+tips[i].name+'" id="amap-sug'+i+'">'+tips[i].name+'<span class="auto-item-span">'+tips[i].district+'</span></div>';
            }
            $("#"+id+" .hot-location-list").empty().append(sug);

          } else {
            var noResult = '<div class="no-address"><img src="/img/food/want-empty.svg" class="no-address-img" alt=""><label class="no-result">æ²¡æœ‰æœç´¢ç»“æœ</label><label>æ¢ä¸ªå…³é”®è¯è¯•è¯•</label></div>';
            $("#"+id+" .hot-location-list").empty().append(noResult);
          }

          var text = $("#"+id+" .send-hot-location input").val();
          if(!text.length){
            $("#"+id+" .hot-location-list").empty()
          }

        });
      });
    }else{
      $("#"+id+" .hot-location-list").empty();
    }
  })

    var map = '';
  //ç‚¹å‡»åˆ—
  $(".hot-location-content").on("click", ".auto-item", function() {
    var text = $(this).attr("data-name");
    var adcode = $(this).attr("data-adcode");
    var id = $(this).parent().parent()[0].id;
    console.log(text);
    if(!text){
      return;
    }
    AMap.service(["AMap.PlaceSearch"], function() {
      var placeSearch = new AMap.PlaceSearch({ //æ„é€ åœ°ç‚¹æŸ¥è¯¢ç±»
        city:adcode,
        map: map
      });
    //å…³é”®å­—æŸ¥è¯¢
    placeSearch.search(text, function(statu, result) {
        console.log(result);
        if (result.info == "OK") {
          var lng = result.poiList.pois[0].location.lng;
          var lat = result.poiList.pois[0].location.lat;
          var lnglatXY = [lng, lat];


          console.log(lnglatXY);

          if(lng && lat){
            $(".hot-location-list").empty();
            $("#"+id+" .position-x").text(lat);
            $("#"+id+" .position-y").text(lng);
            $("#"+id+" .send-hot-location input").val(text);   
          }
        }
      });
    });
  });

  function sendQuest(url,type,data,callback){
    $.ajax({
      type: type,
      url: url,
      data: data,
      dataType: "json",
      success:function(result){
        if(result.code == 200){
          callback.success(result);
        }else{
          callback.error(result);
        }
      },
      error:function(error){
        $.toast("æœåŠ¡å™¨å‡ºé”™");
        callback.error(error);
      }
    })
  }

  function loadLocationList(){
      var data = {};
      var url = "/location/gethotlist";
      var type = "GET";
      sendQuest(url,type,data,{
        success:function(locationList){
          var locationli = '';
          var data = locationList.data;
          for(var i = 0; i < data.length; i++){
            locationli += '<div class="hot-location-content-li" data-lat="'+data[i].GeoX+'" data-lng="'+data[i].GeoY+'" data-id="'+data[i].objectId+'" id="location'+i+'"><div class="send-hot-location">åœ°ç‚¹ï¼š<label>'+data[i].address+'</label></div><div class="send-hot-position">åæ ‡ï¼š<label class="position-x">'+data[i].GeoX+'</label>,<label class="position-y">'+data[i].GeoY+'</label></div><div class="send-hot-num">çƒ­åº¦ï¼š<input type="number" value="'+data[i].hot+'"></div><button class="location-btn_save">ä¿å­˜</button><button class="btn_delete">åˆ é™¤</button></div>';
          }
          $(".hot-location-content").empty().append(locationli);
        },
        error:function(error){

        }
      })
  }
  loadLocationList();

  //è·å–å¡ç‰‡ä¿¡æ¯
  function getCardList(data,callback){
    var url = "/card/getcardlist",
        type = "GET",
        data = data;
    sendQuest(url,type,data,{
        success:function(result){
            callback.success(result);
        },
        error:function(error){
            callback.error(error);
        }
    })
  }

  //åˆå§‹åŒ–å¡ç‰‡ç•Œé¢
  getCardList({},{
    success:function(result){
        // console.log(result);
        var data = result.data;
        var li = '';
        for(var i = 0 ; i < data.length; i++){
          // li += '<div class="swiper-slide" data-id="'+data[i].objectId+'" data-askid="'+data[i].askId+'" data-like-num="'+data[i].likeNum+'" data-down-num="'+data[i].downNum+'" data-liked="'+data[i].liked+'"><div class="card-li"><div data-url="'+data[i].cardImg+'" style="background: url('+data[i].cardImg+') center center / cover no-repeat;" class="card-img" alt=""></div><div class="card-detail">'+data[i].detail+'</div><div class="card-by">â€” â€”'+data[i].byName+'</div></div></div>';

          li+='<div class="card-li" data-id="'+data[i].objectId+'"><div data-url="'+data[i].cardImg+'" style="background: url('+data[i].cardImg+') center center / cover no-repeat;" class="card-img" alt=""></div><div class="card-detail">'+data[i].detail+'</div><div class="card-by">â€” â€”'+data[i].byName+'</div><div class="card-delete" data-id="'+data[i].objectId+'">åˆ é™¤</div></div>';
        }
        $(".card-content-edit .card-ul").empty().append(li);
        
    },
    error:function(error){
        console.log(error);
    }
  })
</script>
</body>
</html>
